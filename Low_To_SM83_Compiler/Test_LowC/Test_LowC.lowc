#include "../../stdlow.h"

#include "../../low_macros.h"

#include "Test_Bricks.h"

#include "Alphabet_Tiles.h"

void Load_Graphics_Into_VRAM(byte* Write_Head, byte* Read_Head, word Counter);	// Declares the function

void Wait_For_Vblank()
{
	byte Scanline;

	do
	{
		Scanline = *LCDY_REGISTER;
	} while (Scanline < VBLANK_SCANLINE);

	*LCDC_REGISTER = 0;	// This turns off the screen to allow writes to VRAM

	Load_Graphics_Into_VRAM(VRAM_BLOCK_2, addressof(0x0104), 0x40);

	return;
}

void Load_Graphics_Into_VRAM(byte* Write_Head, byte* Read_Head, word Counter)
{
	Write_Head = Write_Head;
	Read_Head = Read_Head;
	Counter = Counter;

	while (Counter + high(Counter))
	{
		*Write_Head = *Read_Head;
		Write_Head++;
		Read_Head++;
		Counter--;
	}

	return;
}

void main()
{
	// This will wait until VBlank, disable the LCDC register, and then load the graphics into VRAM

	// Then it'll just enter a loop for testing sake

	Wait_For_Vblank();

	Load_Graphics_Into_VRAM(VRAM_BLOCK_0, Brick_Graphics, sizeof(Brick_Graphics));

	Load_Graphics_Into_VRAM(VRAM_BLOCK_1, Alphabet_Graphics, sizeof(Alphabet_Graphics));

	return;
}

